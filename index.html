<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>遊べるお寺プロジェクト</title>

  <style>
    :root{
      --sky:#5ac2ff;
      --sand:#f7ce52;
      --leaf:#36b37e;
      --ink:#2b2b2b;
      --paper:#fff;
      --rail: 40px;
    }
    @media (max-width: 720px){
      :root{ --rail: 20px; }
    }

    *{ box-sizing:border-box; }
    html{ padding: 0 var(--rail); }
    body{
      margin:0;
      font-family:'Yu Gothic','Hiragino Kaku Gothic ProN',system-ui,-apple-system,sans-serif;
      color:var(--ink);
      background:var(--paper);
    }

    /* ==== ヘッダー ==== */
    .site-header{
      position:relative;
      z-index:2;
      margin-left:  calc(-1 * var(--rail));
      margin-right: calc(-1 * var(--rail));
    }
    .site-header img.hero{
      display:block;
      width:100%;
      max-height:300px;
      object-fit:cover;
    }

    .nav-container{
      position:absolute;
      bottom:-10px;
      left:50%;
      transform:translateX(-50%);
      width:100%;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }
    .nav{ pointer-events:auto; }
    .nav ul{
      list-style:none;
      margin:0;
      padding:6px 12px;
      display:flex;
      gap:1rem;
      background:rgba(255,255,255,.85);
      border-radius:10px 10px 0 0;
      border:3px solid #000;
      box-shadow:0 6px 0 #000;
    }
    .nav a{
      text-decoration:none;
      color:#000;
      font-weight:800;
    }

    /* ==== フェード式ヒーロー（トップ写真） ==== */
    .fade-hero{ padding:24px 20px 0; max-width:1100px; margin:0 auto; }
    .fade-slideshow{
      position: relative;
      width: 100%;
      aspect-ratio: 21 / 9;      /* 高さ控えめ。必要なら 16/9 に変更 */
      max-height: 420px;
      overflow: hidden;
      border-radius: 16px;
      border:3px solid #000;
      box-shadow:0 6px 0 #000;
      background:#ddd;
    }
    .fade-slideshow img{
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0;
      animation: xfade 18s infinite;
    }
.fade-slideshow img:nth-child(1){ animation-delay: 0s; }
.fade-slideshow img:nth-child(2){ animation-delay: 6s; }
.fade-slideshow img:nth-child(3){
  transform: scale(0.85);          /* 85%に縮小（調整OK） */
  transform-origin: center center; /* 中央基準で縮小 */
  object-fit: cover;               /* 切り取りは維持 */
}

}

}


    @keyframes xfade{
      0%   { opacity: 0; }
      5%   { opacity: 1; }  /* ふわっと現れる */
      33%  { opacity: 1; }  /* 表示 */
      38%  { opacity: 0; }  /* ふわっと消える */
      100% { opacity: 0; }
    }

    @media (prefers-reduced-motion: reduce){
      .fade-slideshow img{ animation: none; }
      .fade-slideshow img:not(:first-child){ display: none; }
    }

    /* ==== 共通レイアウト ==== */
    section{ padding:72px 20px 40px; max-width:1100px; margin:auto; }
    h2{ font-size:clamp(20px,2.8vw,28px); border-bottom:4px solid var(--sand); padding-bottom:.5rem; margin-top:0; }

    .card-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:16px; }
    .card{ border:3px solid #000; border-radius:18px; padding:16px; background:#fff; box-shadow:0 6px 0 #000; overflow:hidden; }
    .card img{ width:100%; height:180px; object-fit:cover; border-radius:12px; border:2px solid #000; margin-bottom:10px; }
    .meta{ font-size:.9rem; opacity:.8; margin-top:4px; }

    .btn{ display:inline-block; padding:10px 14px; border:3px solid #000; border-radius:12px; font-weight:800; text-decoration:none; }
    .btn-primary{ background:var(--sand); color:#000; box-shadow:0 4px 0 #000; }
    .btn-ghost{ background:#fff; color:#000; }

    footer{ background:var(--leaf); color:#fff; padding:24px 16px; text-align:center; font-size:.95rem; margin-top:32px; }

    /* ==== 黄色帯（背景扱い） ==== */
    body::before,
    body::after{
      content:"";
      position:fixed;
      top:0; bottom:0;
      width:var(--rail);
      background:var(--sand);
      pointer-events:none;
      z-index:-1;
    }
    body::before{ left:0; }
    body::after { right:0; }
  </style>
</head>

<body>
  <!-- 画像ヘッダー（固定画像＋ナビ） -->
  <header class="site-header" id="home">
    <img class="hero" src="header.png" alt="遊べるお寺プロジェクト ヘッダー画像">
    <div class="nav-container">
      <nav class="nav">
        <ul>
          <li><a href="index.html">ホーム</a></li>
          <li><a href="project.html">遊べるお寺プロジェクトとは</a></li>
          <li><a href="activities.html">活動報告</a></li>
          <li><a href="events.html">イベント情報</a></li>
          <li><a href="join.html">参加方法</a></li>
          <li><a href="support.html">寄付・応援</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- フェード式ヒーロー（トップ写真が順に表示） -->
  <section class="fade-hero" aria-label="活動写真スライドショー">
    <div class="fade-slideshow">
      <!-- 画像はリポジトリ直下の3枚を使用 -->
      <img src="IMG_1.jpeg" alt="トップ写真1">
      <img src="IMG_2.JPG"  alt="トップ写真2">
      <img src="IMG_3.jpg"  alt="トップ写真3">
    </div>
  </section>

  <section id="about">
    <h2>遊べるお寺プロジェクトとは</h2>
    <p>お寺を舞台に「遊び」を通じた交流と学びを提供するプロジェクトです。</p>
    <p><a class="btn btn-primary" href="project.html">もっと詳しく</a></p>
  </section>

  <section id="reports">
    <h2>活動報告 - note（最新）</h2>
    <div id="note-feed" class="card-grid"></div>
    <p style="margin-top:16px">
      <a class="btn btn-ghost" href="activities.html">活動報告ページへ</a>
    </p>
  </section>

  <section id="events">
    <h2>イベント情報</h2>
    <p><a class="btn btn-primary" href="events.html">イベントページを見る</a></p>
  </section>

  <section id="join">
    <h2>参加方法</h2>
    <p>参加のアイデアや希望をお待ちしています。</p>
    <p><a class="btn btn-ghost" href="join.html">参加ページへ</a></p>
  </section>

  <section id="support">
    <h2>寄付・応援</h2>
    <p>応援メッセージを募集しています。</p>
    <p><a class="btn btn-primary" href="support.html">寄付・応援ページへ</a></p>
  </section>

  <section id="contact">
    <h2>お問い合わせ</h2>
    <p>Email: <a href="mailto:hoo263930@gmail.com">hoo263930@gmail.com</a></p>
  </section>

  <footer>
    <p>© 2025 遊べるお寺プロジェクト</p>
  </footer>

  <!-- noteマガジンRSS読み込み（CORSで失敗することもあるため失敗時はメッセージ表示） -->
  <script>
  (async () => {
    const FEEDS = [
      "https://note.com/loyal_dill1011/m/m9a97295e24a9/rss"
    ];
    const mount = document.getElementById("note-feed");

    const pickImage = (item) => {
      const enc = item.querySelector("content\\:encoded, encoded")?.textContent || "";
      const desc = item.querySelector("description")?.textContent || "";
      const html = enc || desc || "";
      const m = html.match(/<img[^>]+src=["']([^"']+)["']/i);
      return m ? m[1] : null;
    };

    const toDate = (str) => {
      const d = new Date(str);
      if (isNaN(d)) return "";
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,"0");
      const day = String(d.getDate()).padStart(2,"0");
      return `${y}/${m}/${day}`;
    };

    const render = (items) => {
      const cards = items.slice(0,6).map(it => {
        const title = it.querySelector("title")?.textContent?.trim() || "無題";
        const link  = it.querySelector("link")?.textContent || "#";
        const dateJp = toDate(it.querySelector("pubDate")?.textContent || "");
        const img = pickImage(it);
        return `
          <article class="card">
            ${img ? `<img src="${img}" alt="${title}">` : ""}
            <h3 style="margin:.5rem 0">${title}</h3>
            <p class="meta">${dateJp ? `${dateJp}｜` : ""}note</p>
            <a class="btn btn-primary" href="${link}" target="_blank" rel="noopener">記事を読む</a>
          </article>
        `;
      }).join("");
      mount.innerHTML = cards || "<p>まだ記事がありません。</p>";
    };

    try {
      const res = await fetch(FEEDS[0]);
      const xml = await res.text();
      const doc = new DOMParser().parseFromString(xml, "text/xml");
      const items = Array.from(doc.querySelectorAll("item"));
      if (items.length) render(items);
      else mount.innerHTML = "<p>noteの最新記事が取得できませんでした。</p>";
    } catch (e) {
      mount.innerHTML = "<p>noteの最新記事を読み込めませんでした。</p>";
    }
  })();
  </script>
</body>
</html>
